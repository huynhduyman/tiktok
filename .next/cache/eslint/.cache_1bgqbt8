[{"/home/duyman/code/solana/tiktok-solana/frontend/pages/_app.js":"1","/home/duyman/code/solana/tiktok-solana/frontend/pages/index.js":"2","/home/duyman/code/solana/tiktok-solana/frontend/components/BottomBar.js":"3","/home/duyman/code/solana/tiktok-solana/frontend/components/UploadModal.js":"4","/home/duyman/code/solana/tiktok-solana/frontend/components/comments.js":"5","/home/duyman/code/solana/tiktok-solana/frontend/components/commentsCard.js":"6","/home/duyman/code/solana/tiktok-solana/frontend/components/footer.js":"7","/home/duyman/code/solana/tiktok-solana/frontend/components/mainview.js":"8","/home/duyman/code/solana/tiktok-solana/frontend/components/noPhantom.js":"9","/home/duyman/code/solana/tiktok-solana/frontend/components/sidebar.js":"10","/home/duyman/code/solana/tiktok-solana/frontend/components/signup.js":"11","/home/duyman/code/solana/tiktok-solana/frontend/components/video.js":"12"},{"size":416,"mtime":1655212116071,"results":"13","hashOfConfig":"14"},{"size":661,"mtime":1655212116071,"results":"15","hashOfConfig":"14"},{"size":833,"mtime":1655212116071,"results":"16","hashOfConfig":"14"},{"size":1415,"mtime":1655212116071,"results":"17","hashOfConfig":"14"},{"size":1686,"mtime":1655212116071,"results":"18","hashOfConfig":"14"},{"size":1153,"mtime":1655212116071,"results":"19","hashOfConfig":"14"},{"size":769,"mtime":1655212116071,"results":"20","hashOfConfig":"14"},{"size":3904,"mtime":1655781591108,"results":"21","hashOfConfig":"14"},{"size":383,"mtime":1655212116071,"results":"22","hashOfConfig":"14"},{"size":1465,"mtime":1655212116071,"results":"23","hashOfConfig":"14"},{"size":1247,"mtime":1655212116071,"results":"24","hashOfConfig":"14"},{"size":1644,"mtime":1655781845385,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"bzmati",{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","suppressedMessages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41"},{"filePath":"42","messages":"43","suppressedMessages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","suppressedMessages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51"},{"filePath":"52","messages":"53","suppressedMessages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","suppressedMessages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","suppressedMessages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","suppressedMessages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/duyman/code/solana/tiktok-solana/frontend/pages/_app.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/pages/index.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/BottomBar.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/UploadModal.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/comments.js",["64"],[],"import { useState, useEffect } from 'react'\nimport CommentCard from './commentsCard'\nimport style from '../styles/Comments.module.css'\n\nconst Comments = ({\n  onHide,\n  createComment,\n  index,\n  getComments,\n  commentCount,\n}) => {\n  const [comments, setComments] = useState([])\n  const [newComment, setNewComment] = useState('')\n\n  console.log(comments, 'ðŸ”¥')\n\n  useEffect(() => {\n    gettingComments()\n  }, [index])\n\n  const gettingComments = async () => {\n    let comments = await getComments(index, commentCount)\n    comments.sort((a, b) => b.videoTime.toNumber() - a.videoTime.toNumber())\n    setComments(comments)\n  }\n\n  const replyClicked = async () => {\n    await createComment(index, commentCount, newComment)\n    setNewComment('')\n  }\n\n  return (\n    <div className={style.wrapper}>\n      <div className={style.commentsHeader}>\n        <p>{commentCount} comments</p>\n        <p className={style.closeButton} onClick={onHide}>\n          &times;\n        </p>\n      </div>\n      {comments.map(comment => {\n        return (\n          <CommentCard\n            key={comment.index.toNumber()}\n            username={comment.commenterName}\n            comment={comment.text}\n            avatar={comment.commenterUrl}\n            timestamp={comment.videoTime.toNumber()}\n          />\n        )\n      })}\n\n      <div className={style.commentInputWrapper}>\n        <input\n          type='text'\n          onChange={e => setNewComment(e.target.value)}\n          value={newComment}\n          placeholder='Leave a comment...'\n        />\n        <button className={style.button} onClick={replyClicked}>\n          Reply\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default Comments\n","/home/duyman/code/solana/tiktok-solana/frontend/components/commentsCard.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/footer.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/mainview.js",["65"],[],"import { Signup } from './signup'\nimport Video from './video'\nimport { useEffect, useState } from 'react'\nimport { useWallet } from '@solana/wallet-adapter-react'\nimport { SOLANA_HOST } from '../utils/const'\nimport { getProgramInstance } from '../utils/utils'\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token'\n\nimport useAccount from '../hooks/useAccount'\nimport useTiktok from '../hooks/useTiktok'\nimport UploadModal from './UploadModal'\nimport BottomBar from './BottomBar'\n\nimport style from '../styles/MainView.module.css'\n\nconst anchor = require('@project-serum/anchor')\nconst utf8 = anchor.utils.bytes.utf8\nconst { BN, web3 } = anchor\nconst { SystemProgram } = web3\n\nconst defaultAccounts = {\n  tokenProgram: TOKEN_PROGRAM_ID,\n  clock: anchor.web3.SYSVAR_CLOCK_PUBKEY,\n  systemProgram: SystemProgram.programId,\n}\n\nconst MainView = () => {\n  const [isAccount, setAccount] = useState(false)\n  const wallet = useWallet()\n  const connection = new anchor.web3.Connection(SOLANA_HOST)\n\n  const program = getProgramInstance(connection, wallet)\n\n  const [tiktoks, setTikToks] = useState([])\n  tiktoks.sort(() => Math.random() - 0.5);\n  // console.log(tiktoks);\n\n  const [newVideoShow, setNewVideoShow] = useState(false)\n  const [description, setDescription] = useState('')\n  const [videoUrl, setVideoUrl] = useState('')\n  const [userDetail, setUserDetail] = useState()\n\n  const { signup } = useAccount()\n  const { getTiktoks, likeVideo, createComment, newVideo, getComments } =\n    useTiktok(\n      setTikToks,\n      userDetail,\n      videoUrl,\n      description,\n      setDescription,\n      setVideoUrl,\n      setNewVideoShow,\n    )\n\n  useEffect(() => {\n    if (wallet.connected) {\n      checkAccount()\n      getTiktoks()\n    }\n  }, [wallet.connected])\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      // getTiktoks();\n    }, 3000)\n\n    // clear interval on re-render to avoid memory leaks\n    return () => clearInterval(intervalId)\n  })\n\n  const checkAccount = async () => {\n    let [user_pda] = await anchor.web3.PublicKey.findProgramAddress(\n      [utf8.encode('user'), wallet.publicKey.toBuffer()],\n      program.programId,\n    )\n\n    try {\n      const userInfo = await program.account.userAccount.fetch(user_pda)\n      console.log(userInfo)\n      setUserDetail(userInfo)\n      setAccount(true)\n    } catch (e) {\n      setAccount(false)\n    }\n  }\n\n  return (\n    <>\n      {isAccount ? (\n        <div>\n          {newVideoShow && (\n            <UploadModal\n              description={description}\n              videoUrl={videoUrl}\n              newVideo={newVideo}\n              setDescription={setDescription}\n              setVideoUrl={setVideoUrl}\n              setNewVideoShow={setNewVideoShow}\n            />\n          )}\n          <div className={style.appVideos}>\n            {tiktoks.length === 0 ? (\n              <h1> No Videos </h1>\n            ) : (\n              tiktoks.map((tiktok, id) => (\n                <Video\n                  key={id}\n                  url={tiktok.account.videoUrl}\n                  channel={tiktok.account.creatorName}\n                  index={tiktok.account.index.toNumber()}\n                  likes={tiktok.account.likes}\n                  description={tiktok.account.description}\n                  shares={tiktok.account.remove.toNumber()}\n                  likeVideo={likeVideo}\n                  likesAddress={tiktok.account.peopleWhoLiked}\n                  createComment={createComment}\n                  getComments={getComments}\n                  commentCount={tiktok.account.commentCount.toNumber()}\n                />\n              ))\n            )}\n          </div>\n          <BottomBar\n            setNewVideoShow={setNewVideoShow}\n            getTiktoks={getTiktoks}\n          />\n        </div>\n      ) : (\n        <Signup signup={signup} wallet={wallet.publicKey.toBase58()} />\n      )}\n    </>\n  )\n}\nexport default MainView\n","/home/duyman/code/solana/tiktok-solana/frontend/components/noPhantom.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/sidebar.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/signup.js",[],[],"/home/duyman/code/solana/tiktok-solana/frontend/components/video.js",[],[],{"ruleId":"66","severity":1,"message":"67","line":19,"column":6,"nodeType":"68","endLine":19,"endColumn":13,"suggestions":"69"},{"ruleId":"66","severity":1,"message":"70","line":60,"column":6,"nodeType":"68","endLine":60,"endColumn":24,"suggestions":"71"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'gettingComments'. Either include it or remove the dependency array.","ArrayExpression",["72"],"React Hook useEffect has missing dependencies: 'checkAccount' and 'getTiktoks'. Either include them or remove the dependency array.",["73"],{"desc":"74","fix":"75"},{"desc":"76","fix":"77"},"Update the dependencies array to be: [gettingComments, index]",{"range":"78","text":"79"},"Update the dependencies array to be: [checkAccount, getTiktoks, wallet.connected]",{"range":"80","text":"81"},[408,415],"[gettingComments, index]",[1734,1752],"[checkAccount, getTiktoks, wallet.connected]"]